# Introdução aos dados não relacionais do Microsoft Azure Data no Azure

## Explore o Armazenamento do Microsoft Azure para dados não relacionais
### Explorar o Armazenamento de Blobs do Azure
O Armazenamento de Blobs do Azure é um serviço que permite armazenar grandes quantidades de dados não estruturados como objetos binários grandes, ou blobs, na nuvem. Os blobs são uma maneira eficiente de armazenar arquivos de dados em um formato otimizado para armazenamento baseado em nuvem, 


Em uma conta de armazenamento do Azure, você armazena blobs em contêineres. Um contêiner oferece uma maneira prática de agrupar blobs relacionados. Você controla quem pode ler e gravar blobs dentro de um contêiner no nível do contêiner.

 você pode organizar blobs em uma hierarquia de pastas virtuais, semelhante a arquivos em um sistema de arquivos em disco. No entanto, por padrão, essas pastas são simplesmente uma maneira de usar um caractere "/" em um nome de blob para organizar os blobs em namespaces. As pastas são puramente virtuais, e você não pode executar operações no nível da pasta para controlar o acesso ou executar operações em massa.


 O Armazenamento de Blobs do Azure é compatível com três tipos diferentes de blob:

Blobs de blocos (Block blobs) - Um blob de blocos é tratado como um conjunto de blocos. Cada bloco pode variar em tamanho, até 4000 MiB. Um blob de blocos pode conter até 190,7 TiB (4000 MiB X 50.000 blocos), o que resulta em um tamanho máximo de mais de 5000 MiB. O bloco é a menor quantidade de dados que podem ser lidos ou gravados como uma unidade individual. Os blobs de blocos são mais bem usados para armazenar objetos binários, grandes e discretos que são alterados com pouca frequência.

Blobs de páginas (Page blobs) - Um blob de páginas é organizado como uma coleção de páginas de tamanho fixo de 512 bytes. Um blob de páginas é otimizado para dar suporte a operações de leitura e gravação aleatórias; você pode buscar e armazenar dados para uma página, se necessário. Um blob de páginas pode conter até 8 TB de dados. O Azure usa blobs de páginas para implementar o armazenamento em disco virtual para máquinas virtuais.

Acrescente blobs (Append blobs) - Um blob de acréscimo é um blob de blocos otimizado para dar suporte a operações de acréscimo. Você só pode adicionar blocos ao final de um blob de acréscimo; não há suporte à atualização ou à exclusão de blocos existentes. Cada bloco pode variar em tamanho, até 4 MB. O tamanho máximo de um blob de acréscimo é de mais de 195 GB.


O Armazenamento de Blobs fornece três camadas de acesso, que ajudam a balancear a latência de acesso e o custo de armazenamento:

A camada Quente é o padrão. Você usa essa camada para blobs que são acessados com frequência. Os dados de blob são armazenados em mídia de alto desempenho.

A camada Cool tem menor desempenho e incorre em encargos de armazenamento reduzidos em comparação com a camada Hot. Use a camada Fria para dados que são acessados com pouca frequência. É comum que blobs recém-criados sejam acessados inicialmente com frequência, mas com o passar do tempo, ela diminui. Nessas situações, você pode criar o blob na camada Quente, mas migrá-lo para a camada Fria mais tarde. Você pode migrar um blob da camada Fria de volta para a camada Quente.

A camada Arquivo fornece o menor custo de armazenamento, mas com maior latência. A camada Arquivos se destina a dados históricos que não devem ser perdidos, mas é necessária apenas raramente. Os blobs na camada Arquivos são efetivamente armazenados em um estado offline. A latência de leitura típica para as camadas Quente e Fria é de alguns milissegundos, mas, para a camada Arquivos, pode levar horas para que os dados fiquem disponíveis. Para recuperar um blob da camada Arquivos, você precisa alterar a camada de acesso para Quente ou Fria. Em seguida, o blob será reidratado. Você poderá ler o blob somente quando o processo de reidratação estiver concluído.


Você pode criar políticas de gerenciamento de ciclo de vida para blobs em uma conta de armazenamento. Uma política de gerenciamento do ciclo de vida pode migrar automaticamente um blob da camada Quente para a Fria e para a camada Arquivos, pois ele envelhece e é usado com menos frequência (a política é baseada no número de dias desde a modificação). Uma política de gerenciamento do ciclo de vida também pode ser organizada para excluir blobs desatualizados.


## Explorar Azure Data Lake Storage Gen2

O Azure Data Lake Store (Gen1) é um serviço separado para armazenamento de dados hierárquico voltado para data lakes analíticos, frequentemente usado por soluções analíticas conhecidas como Big Data, que trabalham com dados estruturados, semi-estruturados e não-estruturados armazenados em arquivos. 

Azure Data Lake Storage Gen2 é uma versão mais recente desse serviço integrada ao Armazenamento do Azure; permitindo que você aproveite a escalabilidade do armazenamento de blobs e o controle de custo das camadas de armazenamento, combinado com as funcionalidades hierárquicas do sistema de arquivos e a compatibilidade com os principais sistemas de análise do Azure Data Lake Store.

Sistemas como o Azure Databricks podem montar um sistema de arquivos distribuído hospedado no Azure Data Lake Store Gen2 e usá-lo para processar grandes volumes de dados. Os locatários do Microsoft Fabric provisionam automaticamente o OneLake, criado com base no Azure Data Lake Storage Gen2.

Para criar um sistema de arquivos do Azure Data Lake Store Gen2, você deve habilitar a opção de namespace hierárquico de uma conta de Armazenamento do Azure. Você pode fazer isso ao criar inicialmente a conta de armazenamento, ou pode atualizar uma conta de armazenamento do Azure existente para dar suporte ao Data Lake Gen2. No entanto, esteja ciente de que a atualização é um processo unidirecional – depois de atualizar uma conta de armazenamento para dar suporte a um namespace hierárquico para armazenamento de blobs, você não pode revertê-lo para um namespace simples.

## Explorar o Microsoft OneLake no Fabric

O Microsoft Fabric provisiona automaticamente o OneLake, baseado no Azure Data Lake Gen 2.

O OneLake é um data lake único, unificado e lógico projetado para toda a sua organização. O OneLake vem automaticamente com todos os locatários do Microsoft Fabric e serve como o repositório central para todos os seus dados de análise. Estruturado ou não estruturado, o OneLake dá suporte a qualquer tipo de arquivo e permite que você use os mesmos dados em vários mecanismos analíticos sem movimentação ou duplicação de dados.

Principais Benefícios do OneLake
Data lake em toda a organização Antes do OneLake, a criação de vários data lakes para diferentes grupos de negócios era comum. Agora, o OneLake fornece uma solução colaborativa, garantindo que toda a sua organização compartilhe um único data lake.
Propriedade e colaboração distribuídas Dentro de um locatário, você pode criar workspaces, permitindo que diferentes partes da sua organização gerenciem seus itens de dados. Esta propriedade distribuída promove a colaboração, mantendo os limites de governança.
Aberto e compatível Baseado no Azure Data Lake Storage (ADLS) Gen2, o OneLake armazena dados no formato Delta Parquet. Ela dá suporte a APIs e SDKs do ADLS Gen2 existentes, tornando-a compatível com os seus aplicativos atuais.
Fácil de navegar É simples navegar pelos dados do OneLake do Windows usando o Explorador de Arquivos do OneLake.

## Explorar arquivos do Azure
Os Arquivos do Azure são essencialmente uma maneira de criar compartilhamentos de rede baseados em nuvem, como você normalmente encontra em organizações locais para disponibilizar documentos e outros arquivos para vários usuários. Ao hospedar compartilhamentos de arquivos no Azure, as organizações podem eliminar os custos de hardware e a sobrecarga de manutenção e se beneficiar da alta disponibilidade e do armazenamento em nuvem escalonável para arquivos.

Você cria o Armazenamento de Arquivos do Azure em uma conta de armazenamento. Os Arquivos do Azure permitem compartilhar até 100 TB de dados em uma única conta de armazenamento. Esses dados podem ser distribuídos em qualquer número de compartilhamentos de arquivos na conta. O tamanho máximo de um único arquivo é de 1 TB, mas você pode definir cotas para limitar o tamanho de cada compartilhamento abaixo dessa figura. Atualmente, o Armazenamento de Arquivos do Azure dá suporte a até 2.000 conexões simultâneas por arquivo compartilhado.

Depois de criar uma conta de armazenamento, você pode carregar arquivos no Armazenamento de Arquivos do Azure usando o portal do Azure ou ferramentas como o utilitário AzCopy . Você também pode usar o serviço de Sincronização de Arquivos do Azure para sincronizar cópias armazenadas em cache localmente de arquivos compartilhados com os dados no Armazenamento de Arquivos do Azure.

O Armazenamento de Arquivos do Azure oferece duas camadas de desempenho. A camada Standard usa hardware baseado em disco rígido em um datacenter e a camada Premium usa discos de estado sólido. A camada Premium oferece maior taxa de transferência, mas é cobrada a uma taxa mais alta.

Os Arquivos do Azure dão suporte a dois protocolos comuns de compartilhamento de arquivos de rede:

O compartilhamento de arquivos SMB (Server Message Block) geralmente é usado em vários sistemas operacionais (Windows, Linux, macOS).
Os compartilhamentos do NFS (Sistema de Arquivos de Rede) são usados por algumas versões do Linux e do macOS. Para criar um compartilhamento NFS, você deve usar uma conta de armazenamento de camada premium e criar e configurar uma rede virtual por meio da qual o acesso ao compartilhamento pode ser controlado.

## Explorar tabelas do Azure
O Armazenamento de Tabelas do Azure é uma solução de armazenamento NoSQL que usa tabelas que contêm itens de dados chave/valor . Cada item é representado por uma linha que contém colunas para os campos de dados que precisam ser armazenados.

No entanto, não se iluda pensando que uma tabela do Armazenamento de Tabelas do Azure é como uma aquelas presentes em um banco de dados relacional. Uma Tabela do Azure permite que você armazene dados semiestruturados. Todas as linhas em uma tabela devem ter uma chave exclusiva (composta por uma chave de partição e uma chave de linha) e, quando você modifica dados em uma tabela, uma coluna de carimbo de timestamp registra a data e hora em que a modificação foi feita; mas, além disso, as colunas de cada linha podem variar. 


Os dados no Armazenamento de Tabelas do Azure geralmente são desnormalizados, com cada linha contendo todos os dados de uma entidade lógica. 

Para ajudar a garantir o acesso rápido, o Armazenamento de Tabelas do Azure divide uma tabela em partições. O particionamento é um mecanismo para agrupar linhas relacionadas, com base em uma propriedade comum ou chave de partição. As linhas que compartilham a mesma chave de partição serão armazenadas em conjunto. O particionamento não apenas ajuda a organizar os dados, mas também pode melhorar a escalabilidade e o desempenho das seguintes maneiras:

As partições são independentes umas das outras e podem aumentar ou diminuir à medida que as linhas são adicionadas a uma partição ou removidas delas. Uma tabela pode conter qualquer número de partições.

Ao pesquisar dados, você pode incluir a chave de partição nos critérios de pesquisa. Isso ajuda a restringir o volume de dados a serem examinados e melhora o desempenho reduzindo a quantidade de E/S (operações de entrada e saída ou leituras e gravações) necessárias para localizar os dados.

A chave em uma tabela do Armazenamento de Tabelas do Azure compreende dois elementos: a chave de partição, que identifica a partição contendo a linha; e uma chave de linha exclusiva para cada linha na mesma partição. Os itens na mesma partição são armazenados em ordem de chave de linha. Se um aplicativo adicionar uma nova linha a uma tabela, o Azure verificará se a linha foi colocada na posição correta na tabela. Esse esquema permite que um aplicativo execute rapidamente consultas de ponto que identificam uma única linha e consultas de intervalo que buscam um bloco contíguo de linhas em uma partição.

