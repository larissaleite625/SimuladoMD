## Entender o processamento em lotes e de fluxo

*Processamento em lote* - Vários registros de dados são coletados e armazenados antes de serem processados juntos em uma única operação.

*Processamento de fluxo* - Uma fonte de dados é constantemente monitorada e processada em tempo real à medida que novos eventos de dados ocorrem.

As arquiteturas de solução comumente usadas para processamento combinado de dados em lote e fluxo incluem arquiteturas lambda e delta. Os detalhes dessas arquiteturas estão além do escopo deste curso, mas incorporam tecnologias para processamento de dados em lotes em grande escala e processamento de fluxo em tempo real para criar uma solução analítica de ponta a ponta.

Diagrama normal:

1. Eventos de dados de uma fonte de dados streaming são capturados em tempo real. 
2. Os dados de outras fontes são ingeridos em um armazenamento de dados (geralmente um data lake) para processamento em lotes.
3. Se a análise em tempo real não for necessária, os dados de streaming capturados serão gravados no armazenamento de dados para processamento em lote subsequente.
4. Quando a análise em tempo real é necessária, uma tecnologia de processamento de fluxo é usada para preparar os dados de streaming para análise ou visualização em tempo real; geralmente filtrando ou agregando os dados em janelas temporais.
5. Os dados que não são de streaming são processados periodicamente em lotes para prepará-los para análise e os resultados são mantidos em um armazenamento de dados analíticos (geralmente chamado de data warehouse) para análise histórica.
6. Os resultados do processamento de fluxo também podem ser mantidos no armazenamento de dados analíticos para dar suporte à análise histórica.
7. Ferramentas analíticas e de visualização são usadas para apresentar e explorar os dados históricos e em tempo real.


## Explorar elementos comuns da arquitetura de processamento de fluxo de dados

### A Microsoft dá suporte a várias tecnologias que você pode usar para implementar análises em tempo real de dados de streaming

*Azure Stream Analytics:* Uma solução de plataforma como serviço (PaaS) que você pode usar para definir trabalhos de streaming que ingerem dados de uma fonte de streaming, aplicam uma consulta perpétua e gravam os resultados em uma saída.

*Spark Structured Streaming:* uma biblioteca de código aberto que permite desenvolver soluções de streaming complexas em serviços baseados em Apache Spark, incluindo Microsoft Fabric e Azure Databricks.

*Microsoft Fabric:* uma plataforma de banco de dados e análise de alto desempenho que inclui Engenharia de Dados, Data Factory, Ciência de Dados, Análise em Tempo Real, Data Warehouse e Bancos de Dados.

### Fontes para processamento de fluxo
*Hubs de Eventos do Azure:* Um serviço de ingestão de dados que você pode usar para gerenciar filas de dados de eventos, garantindo que cada evento seja processado em ordem, exatamente uma vez.

*Hub IoT do Azure:* Um serviço de ingestão de dados semelhante aos Hubs de Eventos do Azure, mas otimizado para gerenciar dados de eventos de dispositivos IoT (Internet das Coisas).

*Azure Data Lake Storage Gen 2:* Um serviço de armazenamento altamente escalonável frequentemente usado em cenários de processamento em lotes, mas que também pode ser usado como fonte de dados de streaming.

*Apache Kafka:* Uma solução de ingestão de dados de código aberto comumente usada em conjunto com o Apache Spark.

### Coletores para processamento de fluxo

*Hubs de Eventos do Azure:* usados para enfileirar os dados processados para processamento posterior.
Azure Data Lake Store Gen 2, Microsoft OneLake ou Armazenamento de Blobs do Azure: Usado para persistir os resultados processados como um arquivo.

*Banco de Dados SQL do Azure, Azure Databricks ou Microsoft Fabric:* Usado para persistir os resultados processados em uma tabela para consulta e análise.

*Microsoft Power BI:* usado para gerar visualizações de dados em tempo real em relatórios e painéis.


### Explorar a Inteligência em Tempo Real do Microsoft Fabric

O hub em tempo real do Microsoft Fabric atua como um catálogo centralizado para sua organização. Ele simplifica o acesso, a adição, a exploração e o compartilhamento de dados. Ao ampliar fontes de dados, ele aprimora insights e clareza visual entre domínios. Crucialmente, esse hub garante a disponibilidade e a acessibilidade dos dados, permitindo uma tomada de decisão rápida e ações informadas. O compartilhamento de dados de streaming de diversas fontes desbloqueia o business intelligence abrangente em toda a sua organização.

### Explorar o streaming estruturado do Apache Spark
Apache Spark é uma estrutura de processamento distribuído para análise de dados em larga escala. Você pode usar o Spark no Microsoft Azure nos seguintes serviços:

- Microsoft Fabric
- Azure Databricks

Você usa a API do Streaming Estruturado do Spark para ler dados de uma fonte de dados em tempo real, como um hub Kafka, um armazenamento de arquivos ou uma porta de rede, em um dataframe "sem limites" que é continuamente preenchido com novos dados do fluxo. Você define uma consulta no dataframe que seleciona, projeta ou agrega os dados – geralmente em janelas temporais. Os resultados da consulta geram outro dataframe, que pode ser persistido para análise ou processamento adicional.

### Delta Lake
Delta Lake é uma camada de armazenamento de código aberto que adiciona suporte para consistência transacional, aplicação de esquema e outros recursos comuns de data warehouse ao armazenamento de data lake. Ele também unifica o armazenamento para dados em lote e streaming e pode ser usado no Spark para definir tabelas relacionais para processamento em lotes e em fluxo.

Os tempos de execução do Microsoft Fabric e Azure Databricks incluem suporte para Delta Lake.

O Delta Lake combinado com o fluxo estruturado do Spark é uma boa solução quando você precisa abstrair em lote e transmitir dados processados em um data lake por um esquema relacional para análise e consulta baseada em SQL.

## Explorar a Inteligência em Tempo Real do Microsoft Fabric